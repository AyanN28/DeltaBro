<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LoadMap | System Initialization</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
    :root { --brand-blue:#2563eb; --bg-dark:#09090b; }
    body{ font-family:'Inter',sans-serif; background:var(--bg-dark); color:#fafafa; }
    .heading-font{font-family:'Space Grotesk',sans-serif;}
    .grid-bg{ background-image:radial-gradient(#27272a 1px,transparent 1px); background-size:30px 30px; }
    .form-card{ background:rgba(24,24,27,.85); backdrop-filter:blur(12px); border:1px solid #27272a; transition:.3s; }
    .form-card:hover{border-color:#3b82f6;}
    
    /* Counter Badge Glow */
    #subjectCounter { box-shadow: 0 0 15px rgba(59, 130, 246, 0.4); }

    /* AI ROBOT */
    .robot{ width:110px; animation:floatBot 3s ease-in-out infinite; text-align:center; }
    @keyframes floatBot{ 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }
    .head{ width:110px; height:90px; background:#020617; border:2px solid #3b82f6; border-radius:14px; position:relative; box-shadow:0 0 20px rgba(59,130,246,.6); }
    .eye{ width:14px; height:14px; background:#3b82f6; border-radius:50%; position:absolute; top:28px; animation:blink 4s infinite; }
    .eye.left{left:25px;} .eye.right{right:25px;}
    @keyframes blink{ 0%,92%,100%{height:14px;} 95%{height:3px;} }
</style>
</head>

<body class="min-h-screen grid-bg p-4 md:p-8">

<div class="fixed bottom-6 right-6 z-50 pointer-events-none">
  <div class="robot">
    <div class="head">
      <div class="eye left"></div>
      <div class="eye right"></div>
    </div>
    <div class="status mt-2 text-[10px] text-blue-400 uppercase tracking-widest font-bold">System Online</div>
  </div>
</div>

<div class="max-w-3xl mx-auto">
    <header class="mb-10 text-center">
        <h1 class="heading-font text-4xl font-bold uppercase italic tracking-tighter">
            Initialize <span class="text-blue-500 text-shadow-glow">Profile</span>
        </h1>
        <p class="text-zinc-500 text-sm mt-2">Map your modules to calibrate the adaptive engine.</p>
    </header>

    <form class="space-y-6">
        <div class="form-card p-6 rounded-2xl space-y-4">
            <h2 class="text-blue-400 text-xs uppercase tracking-widest font-bold flex gap-2">
                <span class="w-1 h-4 bg-blue-500 rounded-full"></span>Student Credentials
            </h2>
            <div class="grid md:grid-cols-2 gap-4">
                <input id="userName" placeholder="Full Name" class="bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-sm focus:border-blue-500 outline-none w-full">
                <input id="institution" placeholder="University / Institution" class="bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-sm focus:border-blue-500 outline-none w-full">
            </div>
        </div>

        <div class="flex justify-between items-center bg-zinc-900/50 p-4 rounded-xl border border-zinc-800">
            <div>
                <h3 class="text-sm font-bold text-white">Active Curriculum</h3>
                <p class="text-[10px] text-zinc-500 uppercase tracking-widest">Live Subject Analysis</p>
            </div>
            <div id="subjectCounter" class="bg-blue-600 text-white px-4 py-2 rounded-lg font-bold text-lg">
                <span id="countNumber">1</span> <span class="text-[10px] opacity-70">Modules</span>
            </div>
        </div>

        <div id="subjectContainer" class="space-y-4">
            <div class="subject-card form-card p-6 rounded-2xl space-y-4 relative overflow-hidden">
                <div class="flex justify-between items-center border-b border-zinc-800/50 pb-3">
                    <span class="text-[10px] font-mono text-blue-500 uppercase tracking-widest">Module Identifier: 01</span>
                    <button type="button" onclick="removeSubject(this)" class="text-zinc-600 hover:text-red-500 transition">âœ•</button>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <input class="sub-name bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-sm focus:border-blue-500 outline-none" placeholder="Subject Name">
                    <select class="sub-level bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-sm focus:border-blue-500 outline-none text-zinc-400">
                        <option value="strong">Level: Strong (Revision Focus)</option>
                        <option value="average" selected>Level: Average (Standard Study)</option>
                        <option value="weak">Level: Weak (High Intensity)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="flex flex-col gap-4">
            <button type="button" onclick="addSubjectField()" class="py-3 border border-dashed border-zinc-700 rounded-xl text-[10px] uppercase tracking-[0.2em] text-zinc-500 hover:text-blue-400 hover:border-blue-500 transition">
                + Add Another Academic Module
            </button>

            <div class="form-card p-6 rounded-2xl space-y-4">
                <h2 class="text-blue-400 text-xs uppercase tracking-widest font-bold">Temporal Constraints</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <input id="hours" type="number" placeholder="Daily Study Capacity (Hrs)" class="bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-sm focus:border-blue-500 outline-none">
                    <input id="deadline" type="date" class="bg-zinc-900 border border-zinc-800 p-4 rounded-xl text-sm focus:border-blue-500 outline-none text-zinc-500">
                </div>
            </div>

            <button type="button" onclick="finalizeSetup(this)" 
                class="w-full py-5 bg-blue-600 hover:bg-blue-500 rounded-2xl tracking-[0.3em] uppercase font-bold shadow-xl transition-all active:scale-95">
                Generate Adaptive Map
            </button>
        </div>
    </form>
</div>

<script>
function updateUI() {
    const cards = document.querySelectorAll('.subject-card');
    document.getElementById('countNumber').textContent = cards.length;
    
    cards.forEach((card, i) => {
        card.querySelector('.text-blue-500').textContent = `Module Identifier: ${(i + 1 < 10 ? '0' : '') + (i + 1)}`;
    });
}

function addSubjectField() {
    const container = document.getElementById('subjectContainer');
    const firstCard = document.querySelector('.subject-card');
    const clone = firstCard.cloneNode(true);
    
    // Reset values
    clone.querySelector('.sub-name').value = '';
    clone.querySelector('.sub-level').value = 'average';
    
    container.appendChild(clone);
    updateUI();
}

function removeSubject(btn) {
    const cards = document.querySelectorAll('.subject-card');
    if(cards.length > 1) {
        btn.closest('.subject-card').remove();
        updateUI();
    } else {
        alert("At least one module is required for initialization.");
    }
}

function finalizeSetup(btn) {
    const statusText = document.querySelector('.status');
    const subjects = [...document.querySelectorAll('.subject-card')].map(c => ({
        name: c.querySelector('.sub-name').value,
        level: c.querySelector('.sub-level').value
    })).filter(s => s.name);

    if(!subjects.length) { alert('Enter at least one subject name'); return; }

    // Save Data
    const payload = {
        student: document.getElementById('userName').value,
        institution: document.getElementById('institution').value,
        dailyHours: document.getElementById('hours').value,
        deadline: document.getElementById('deadline').value,
        modules: subjects
    };

    localStorage.setItem('loadmap_data', JSON.stringify(payload));

    // UI Animation
    statusText.textContent = 'Processing...';
    btn.textContent = 'CALIBRATING ENGINE...';
    btn.disabled = true;

    setTimeout(() => {
        statusText.textContent = 'Ready';
        window.location.href = 'RESULT.html'; // Or your next page
    }, 1500);
}
</script>

</body>
</html>
